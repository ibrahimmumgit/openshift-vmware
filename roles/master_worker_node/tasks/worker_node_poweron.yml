---
- name: Power-On the worker VMs
  vmware_guest:
    hostname: "{{ vcenter.host }}"
    username: "{{ vcenter.username }}"
    password: "{{ vcenter.password }}"
    datacenter: "{{ vcenter.datacenter }}"
    validate_certs: no
    folder: "{{ vcenter.folder }}"
    name: "{{ item.name }}"
    state: poweredon
  loop: "{{ worker_nodes_list }}"
  loop_control:
    label: "Power On {{ item.name }}"

- name: Power-Off the bootstrap VMs
  vmware_guest:
    hostname: "{{ vcenter.host }}"
    username: "{{ vcenter.username }}"
    password: "{{ vcenter.password }}"
    datacenter: "{{ vcenter.datacenter }}"
    validate_certs: no
    folder: "{{ vcenter.folder }}"
    name: "{{ item.name }}"
    state: poweredoff
  loop: "{{ bootstrap_nodes_list }}"
  loop_control:
    label: "Power Off {{ item.name }}"

- name: Delete Bootstrap VM
  vmware_guest:
    hostname: "{{ vcenter.host }}"
    username: "{{ vcenter.username }}"
    password: "{{ vcenter.password }}"
    datacenter: "{{ vcenter.datacenter }}"
    validate_certs: no
    folder: "{{ vcenter.folder }}"
    name: "{{ item.name }}"
    state: absent
  loop: "{{ bootstrap_nodes_list }}"
  loop_control:
    label: "Delete {{ item.name }}"